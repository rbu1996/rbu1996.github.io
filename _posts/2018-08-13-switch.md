---
layout: post
title: switch
date: 2018-08-13 15:14:39.000000000 +09:00
published: true
--- 

```
login as: admin          
Nexus 5000 Switch           
Using keyboard-interactive authentication.
Password:
Cisco Nexus Operating System (NX-OS) Software
TAC support: http://www.cisco.com/tac
Copyright (c) 2002-2014, Cisco Systems, Inc. All rights reserved.
The copyrights to certain works contained in this software are
owned by other third parties and used and distributed under
license. Certain components of this software are licensed under
the GNU General Public License (GPL) version 2.0 or the GNU
Lesser General Public License (LGPL) Version 2.1. A copy of each
such license is available at
http://www.opensource.org/licenses/gpl-2.0.php and
http://www.opensource.org/licenses/lgpl-2.1.php
R1-5596-01# show run

!Command: show running-config
!Time: Sat Apr  7 02:33:43 2012

version 6.0(2)N2(5a)
hostname R1-5596-01

feature telnet      //Telnet属于TCP/IP协议族。它为用户提供了在本地计算机上完成远程主机工作的能力。终端使用者可以在telnet程序中输入命令，这些命令会在服务器上运行。
feature interface-vlan       //interface vlan num 就是进入vlan几，然后可以对VLAN进行配置
feature lacp        //LACP（Link Aggregation Control Protocol，链路汇聚控制协议）是一种实现链路动态汇聚的协议
feature dhcp        //HDCP是High-bandwidth Digital Content Protection的缩写，中文可称作“高带宽数码内容保护”
feature lldp        //链路层发现协议(LLDP)是一个厂商无关的二层协议,它允许网络设备在本地子网中通告自己的设备标识和性能。
feature fex         //交换矩阵扩展器 [FEX]，启动n2k设备功能

logging level feature-mgr 0         //特征管理
username admin password 5 $1$JhFNxOwo$64sVlAz3Xe8RsjMavHWHI1  role network-admin
no password strength-check
fips mode enable
ip domain-lookup
logging event link-status default
no errdisable detect cause link-flap
no errdisable detect cause loopback
errdisable recovery cause dcbx-error
no errdisable detect cause inline-power
errdisable recovery cause inline-power
fex 100         //安装FEX扩展设备
//定义FEX扩展设备，创建117个FEX
  pinning max-links 1           //使用portchannel的时候，数值必须为1
  description "R2-2248"         //定义一个FEX号码101，类似定义VLAN
fex 101
  pinning max-links 1
  description "R7-2232"
fex 117
  pinning max-links 1
  description "R5-2232"
slot 1
slot 2
  provision model N55-M16UP
slot 3
  provision model N55-M16UP
slot 4
snmp-server user admin network-admin auth md5 0xe54e70c9b6ebc48423bc03f8909af815 priv 0xe54e70c9b6ebc48423bc03f8909af815 localizedkey
snmp-server user cisco network-operator auth md5 0x775d1f5ab1a80e70118f69f365112d02 localizedkey
snmp-server user eccom network-admin auth md5 0x5edee0d3654b4bef24ced47b2e505905 priv 0x5edee0d3654b4bef24ced47b2e505905 localizedkey

vrf context management
vlan configuration 111
vlan 1,10,30,40-42,99-164,1000-1030,3000-3200
service dhcp
ip dhcp relay
port-profile default max-ports 512


interface Vlan1

interface Vlan10        //进入VLAN 10，对VLAN进行配置
  description swich-MANAGER
  no shutdown           //启用端口
  ip address 192.168.10.254/24      //为VLAN 10设置管理IP

interface Vlan30
  no shutdown
  ip address 192.168.30.254/24


interface port-channel96        //进入上连端口
  description "Port-Channel 96 is for R5-3232C, with interface E1/31 E1/32"
  switchport mode trunk         //将端口配置为Trunk模式



interface port-channel101
  description "Port-Channel 101 is for R7-2232, with interface E1/39-40 E1/47-48 E2/13-16"
  switchport mode fex-fabric
  fex associate 101

interface Ethernet1/1       //重复上面的配置
  description "Connect to R2-2248, belongs to Port-Channel 100"
  switchport mode fex-fabric        //设置端口属性为FEX连接属性 
  fex associate 100         //设定连接的fex号码，在连接成功后，以E 101/1/X表示扩展端口
  channel-group 100         //加入port-channel 1


interface Ethernet3/15
  switchport access vlan 30

interface Ethernet3/16
  no switchport
  speed 1000
  duplex full
  ip address 192.168.20.1/24        //设置网口IP

interface mgmt0

interface Ethernet100/1/1
  description "R2-2248 Port, Owner Public"
  switchport access vlan 40         //网口对应VLAN 40


interface Ethernet101/1/18
  description "R7-2232 Port, Owner Hu Mingyue"
  switchport mode trunk         //trunk模式

line console
line vty
boot kickstart bootflash:/n5000-uk9-kickstart.6.0.2.N2.5a.bin
boot system bootflash:/n5000-uk9.6.0.2.N2.5a.bin
ip route 0.0.0.0/0 192.168.20.2
```
